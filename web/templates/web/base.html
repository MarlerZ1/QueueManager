{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>{{ title }}</title>
</head>
<body>
<div style="background-color: #343a40;">
    <div class="container">
        <div class="d-flex justify-content-end">
            <a href="{% url 'admin:index' %}"><h5 class="mt-4 mb-4" style="color: #aaaaaa;" >Admin</h5></a>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-6 mx-auto mt-4">
            {% block content %}

            {% endblock %}

        </div>
    </div>
</div>

<script>
let socket = new WebSocket('ws://localhost:8000/ws/graph/')

socket.onmessage = function (event){
    let djangoData = JSON.parse(event.data)

    let div = document.querySelector("#list")
    div.innerHTML = ""

    for (const i in djangoData.new_objects_list) {
        card = djangoData.new_objects_list.at(i)
        div.innerHTML += `
            <div class="card mb-3">
                 <div class="card-body">
                    <h5 class="card-title"> ${card.name} </h5>
                    <p class="card-text">${card.description}</p>
                    <a href="/" class="card-link">Просмотреть</a>
                </div>
            </div>
        `
    }
}

</script>
</body>
</html>